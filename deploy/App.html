<!DOCTYPE html>
<html>
<head>
    <title>TestApp</title>

    <script type="text/javascript" src="/apps/2.0p5/sdk.js"></script>




    <script type="text/javascript">
        Rally.onReady(function () {
                Ext.define("CustomApp",{extend:"Rally.app.App",componentCls:"app",launch:function(){Ext.create("Rally.data.WsapiDataStore",{model:"testcase",autoLoad:!0,listeners:{load:this._onDataLoaded,scope:this}})},_onDataLoaded:function(store,data){var totalTestCases=data.length,pass=0,fail=0,blocked=0,error=0,inconclusive=0,notRan=0,automated=0,manual=0;Ext.Array.each(data,function(record){switch(record.get("LastVerdict")){case"Pass":pass++;break;case"Fail":fail++;break;case"Blocked":blocked++;break;case"Error":error++;break;case"Inconclusive":inconclusive++;break;default:notRan++}switch(record.get("Method")){case"Automated":automated++;break;case"Manual":manual++}});var records=[];records.push({name:"Total TestCases",value:totalTestCases,percent:"100%"}),records.push({name:"Passing",value:pass,percent:(100*(pass/totalTestCases)).toFixed(0)+"%"}),records.push({name:"Failed",value:fail,percent:(100*(fail/totalTestCases)).toFixed(0)+"%"}),records.push({name:"Blocked",value:blocked,percent:(100*(blocked/totalTestCases)).toFixed(0)+"%"}),records.push({name:"Error",value:error,percent:(100*(error/totalTestCases)).toFixed(0)+"%"}),records.push({name:"Inconclusive",value:inconclusive,percent:(100*(inconclusive/totalTestCases)).toFixed(0)+"%"}),records.push({name:"Not Ran",value:notRan,percent:(100*(notRan/totalTestCases)).toFixed(0)+"%"}),this.add({xtype:"rallygrid",store:Ext.create("Rally.data.custom.Store",{data:records}),showPagingToolbar:!1,columnCfgs:[{text:"Name",dataIndex:"name"},{text:"Value",dataIndex:"value"},{text:"Percent",dataIndex:"percent",flex:1}]})}});

            Rally.launchApp('CustomApp', {
                name:"TestApp",
	            parentRepos:""
            });

        });
    </script>


    <style type="text/css">
        .app {
     /* Add app styles here */
}

    </style>
</head>
<body></body>
</html>
